CREATE TABLE IF NOT EXISTS owldinal_nft_mint_box_events
(
    id           BIGINT AUTO_INCREMENT PRIMARY KEY,
    tx_hash      CHAR(66)  NOT NULL,
    log_index    BIGINT    NOT NULL,
    block_number BIGINT    NOT NULL,
    block_hash   CHAR(66)  NOT NULL,
    user         CHAR(42)  NOT NULL,
    box_id       BIGINT    NOT NULL,
    mint_type    BIGINT    NOT NULL,
    token_uri    TEXT,
    created_at   TIMESTAMP      DEFAULT CURRENT_TIMESTAMP,
    updated_at   TIMESTAMP      DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted_at   TIMESTAMP NULL DEFAULT NULL,
    UNIQUE (tx_hash, log_index),
    INDEX idx_user_address (user),
    INDEX idx_box_id (box_id),
    INDEX idx_block_number_mint (block_number)
);

CREATE TABLE IF NOT EXISTS owldinal_nft_transfer_events
(
    id           BIGINT AUTO_INCREMENT PRIMARY KEY,
    tx_hash      CHAR(66)  NOT NULL,
    log_index    BIGINT    NOT NULL,
    block_number BIGINT    NOT NULL,
    block_hash   CHAR(66)  NOT NULL,
    from_user    CHAR(42)  NOT NULL,
    to_user      CHAR(42)  NOT NULL,
    box_id       BIGINT    NOT NULL,
    created_at   TIMESTAMP      DEFAULT CURRENT_TIMESTAMP,
    updated_at   TIMESTAMP      DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted_at   TIMESTAMP NULL DEFAULT NULL,
    UNIQUE (tx_hash, log_index),
    INDEX idx_from_user (from_user),
    INDEX idx_to_user (to_user),
    INDEX idx_box_id (box_id),
    INDEX idx_block_number_mint (block_number)
);

CREATE TABLE owldinal_nft_tokens
(
    id          BIGINT AUTO_INCREMENT PRIMARY KEY,
    token_id    BIGINT    NOT NULL,
    owner       VARCHAR(42),
    token_uri   TEXT,
    is_staking  BOOLEAN,
    buffing_ids TEXT,
    created_at  TIMESTAMP      DEFAULT CURRENT_TIMESTAMP,
    updated_at  TIMESTAMP      DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted_at  TIMESTAMP NULL DEFAULT NULL,
    UNIQUE (token_id),
    INDEX idx_token_id (token_id),
    INDEX idx_owner (owner)
);

--

CREATE TABLE IF NOT EXISTS gen_one_box_mint_box_events
(
    id           BIGINT AUTO_INCREMENT PRIMARY KEY,
    tx_hash      CHAR(66)  NOT NULL,
    log_index    BIGINT    NOT NULL,
    block_number BIGINT    NOT NULL,
    block_hash   CHAR(66)  NOT NULL,
    user         CHAR(42)  NOT NULL,
    token_id     BIGINT    NOT NULL,
    box_type     TINYINT   NOT NULL,
    created_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted_at   TIMESTAMP NULL DEFAULT NULL,
    UNIQUE (tx_hash, log_index),
    INDEX idx_user (user),
    INDEX idx_token_id (token_id)
);

CREATE TABLE IF NOT EXISTS gen_one_box_transfer_events
(
    id           BIGINT AUTO_INCREMENT PRIMARY KEY,
    tx_hash      CHAR(66)  NOT NULL,
    log_index    BIGINT    NOT NULL,
    block_number BIGINT    NOT NULL,
    block_hash   CHAR(66)  NOT NULL,
    from_user    CHAR(42)  NOT NULL,
    to_user      CHAR(42)  NOT NULL,
    token_id     BIGINT    NOT NULL,
    created_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted_at   TIMESTAMP NULL DEFAULT NULL,
    UNIQUE (tx_hash, log_index),
    INDEX idx_from_user (from_user),
    INDEX idx_to_user (to_user),
    INDEX idx_token_id (token_id)
);

CREATE TABLE IF NOT EXISTS owl_game_join_game_events
(
    id           BIGINT AUTO_INCREMENT PRIMARY KEY,
    tx_hash      CHAR(66)  NOT NULL,
    log_index    BIGINT    NOT NULL,
    block_number BIGINT    NOT NULL,
    block_hash   CHAR(66)  NOT NULL,
    user         CHAR(42)  NOT NULL,
    invite_code  INT       NOT NULL,
    created_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted_at   TIMESTAMP NULL DEFAULT NULL,
    UNIQUE (tx_hash, log_index),
    INDEX idx_user (user)
);

CREATE TABLE IF NOT EXISTS owl_game_bind_invitation_events
(
    id           BIGINT AUTO_INCREMENT PRIMARY KEY,
    tx_hash      CHAR(66)  NOT NULL,
    log_index    BIGINT    NOT NULL,
    block_number BIGINT    NOT NULL,
    block_hash   CHAR(66)  NOT NULL,
    inviter      CHAR(42)  NOT NULL,
    invitee      CHAR(42)  NOT NULL,
    created_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted_at   TIMESTAMP NULL DEFAULT NULL,
    UNIQUE (tx_hash, log_index),
    INDEX idx_inviter (inviter),
    INDEX idx_invitee (invitee)
);

CREATE TABLE IF NOT EXISTS owl_game_prize_pool_increased_events
(
    id           BIGINT AUTO_INCREMENT PRIMARY KEY,
    tx_hash      CHAR(66)  NOT NULL,
    log_index    BIGINT    NOT NULL,
    block_number BIGINT    NOT NULL,
    block_hash   CHAR(66)  NOT NULL,
    amount       VARCHAR(100),
    created_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted_at   TIMESTAMP NULL DEFAULT NULL,
    UNIQUE (tx_hash, log_index)
);

CREATE TABLE IF NOT EXISTS owl_game_prize_pool_decreased_events
(
    id           BIGINT AUTO_INCREMENT PRIMARY KEY,
    tx_hash      CHAR(66)  NOT NULL,
    log_index    BIGINT    NOT NULL,
    block_number BIGINT    NOT NULL,
    block_hash   CHAR(66)  NOT NULL,
    amount       VARCHAR(100),
    created_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted_at   TIMESTAMP NULL DEFAULT NULL,
    UNIQUE (tx_hash, log_index)
);

CREATE TABLE IF NOT EXISTS owl_game_stake_owldinal_nft_events
(
    id           BIGINT AUTO_INCREMENT PRIMARY KEY,
    tx_hash      CHAR(66)  NOT NULL,
    log_index    BIGINT    NOT NULL,
    block_number BIGINT    NOT NULL,
    block_hash   CHAR(66)  NOT NULL,
    user         CHAR(42)  NOT NULL,
    token_ids    TEXT,
    created_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted_at   TIMESTAMP NULL DEFAULT NULL,
    UNIQUE (tx_hash, log_index),
    INDEX idx_user (user)
);

CREATE TABLE IF NOT EXISTS owl_game_unstake_owldinal_nft_events
(
    id           BIGINT AUTO_INCREMENT PRIMARY KEY,
    tx_hash      CHAR(66)  NOT NULL,
    log_index    BIGINT    NOT NULL,
    block_number BIGINT    NOT NULL,
    block_hash   CHAR(66)  NOT NULL,
    user         CHAR(42)  NOT NULL,
    token_ids    TEXT,
    created_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted_at   TIMESTAMP NULL DEFAULT NULL,
    UNIQUE (tx_hash, log_index),
    INDEX idx_user (user)
);

CREATE TABLE IF NOT EXISTS owl_game_stake_mystery_box_events
(
    id           BIGINT AUTO_INCREMENT PRIMARY KEY,
    tx_hash      CHAR(66)  NOT NULL,
    log_index    BIGINT    NOT NULL,
    block_number BIGINT    NOT NULL,
    block_hash   CHAR(66)  NOT NULL,
    user         CHAR(42)  NOT NULL,
    token_ids    TEXT,
    created_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted_at   TIMESTAMP NULL DEFAULT NULL,
    UNIQUE (tx_hash, log_index),
    INDEX idx_user (user)
);

CREATE TABLE IF NOT EXISTS owl_game_unstake_mystery_box_events
(
    id           BIGINT AUTO_INCREMENT PRIMARY KEY,
    tx_hash      CHAR(66)  NOT NULL,
    log_index    BIGINT    NOT NULL,
    block_number BIGINT    NOT NULL,
    block_hash   CHAR(66)  NOT NULL,
    user         CHAR(42)  NOT NULL,
    token_id     BIGINT    NOT NULL,
    box_type     TINYINT   NOT NULL,
    rewards      VARCHAR(100),
    created_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted_at   TIMESTAMP NULL DEFAULT NULL,
    UNIQUE (tx_hash, log_index),
    INDEX idx_user (user),
    INDEX idx_token_id (token_id)
);

CREATE TABLE IF NOT EXISTS owl_game_claim_inviter_reward_events
(
    id              BIGINT AUTO_INCREMENT PRIMARY KEY,
    tx_hash         CHAR(66)  NOT NULL,
    log_index       BIGINT    NOT NULL,
    block_number    BIGINT    NOT NULL,
    block_hash      CHAR(66)  NOT NULL,
    user            CHAR(42)  NOT NULL,
    withdraw_amount VARCHAR(100),
    created_at      TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at      TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted_at      TIMESTAMP NULL DEFAULT NULL,
    UNIQUE (tx_hash, log_index),
    INDEX idx_user (user)
);
